Weekly review ¬∑ HTML
Copier

<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Revue de semaine</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='8' fill='%232d5a3d'/><text x='50%25' y='54%25' font-size='18' text-anchor='middle' dominant-baseline='middle'>üìã</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #f7f5f2;
  --surface: #ffffff;
  --border: #e8e4df;
  --border-focus: #b8a898;
  --text: #1a1614;
  --text-muted: #9a8f86;
  --accent: #2d5a3d;
  --accent-light: #e8f0eb;
  --accent2: #c17c3a;
  --accent2-light: #faf0e6;
  --danger: #c0392b;
  --success: #2d5a3d;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-weight: 300;
  min-height: 100vh;
  padding: 48px 24px 80px;
}

/* Grain texture */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
  opacity: 0.4;
}

.page {
  max-width: 560px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
}

/* Header */
.header {
  margin-bottom: 48px;
  opacity: 0;
  animation: fadeUp 0.6s ease forwards;
}

.header-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 8px;
}

.title {
  font-family: 'Lora', serif;
  font-size: 28px;
  font-weight: 400;
  color: var(--text);
  letter-spacing: -0.02em;
}

.week-badge {
  font-size: 11px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text-muted);
  background: var(--border);
  padding: 5px 10px;
  border-radius: 20px;
  margin-top: 4px;
}

.subtitle {
  font-size: 13px;
  color: var(--text-muted);
  letter-spacing: 0.02em;
}

/* Progress bar */
.progress-bar {
  height: 2px;
  background: var(--border);
  border-radius: 2px;
  margin-bottom: 48px;
  overflow: hidden;
  opacity: 0;
  animation: fadeUp 0.6s ease 0.1s forwards;
}

.progress-fill {
  height: 100%;
  background: var(--accent);
  border-radius: 2px;
  transition: width 0.4s ease;
  width: 0%;
}

/* Sections */
.section {
  margin-bottom: 40px;
  opacity: 0;
  transform: translateY(12px);
}

.section.visible {
  animation: fadeUp 0.5s ease forwards;
}

.section-label {
  font-size: 10px;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.section-label::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--border);
}

/* Score */
.score-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.score-btn {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--surface);
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  font-weight: 400;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.score-btn:hover { border-color: var(--border-focus); color: var(--text); }
.score-btn.selected { background: var(--accent); border-color: var(--accent); color: white; font-weight: 500; }

/* Chips (select options) */
.chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.chip {
  padding: 9px 16px;
  border-radius: 24px;
  border: 1px solid var(--border);
  background: var(--surface);
  font-family: 'DM Sans', sans-serif;
  font-size: 13px;
  font-weight: 300;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}

.chip:hover { border-color: var(--border-focus); color: var(--text); }
.chip.selected-green { border-color: var(--accent); background: var(--accent-light); color: var(--accent); }
.chip.selected-yellow { border-color: var(--accent2); background: var(--accent2-light); color: var(--accent2); }
.chip.selected-red { border-color: var(--danger); background: #fdf0ee; color: var(--danger); }

/* Textarea */
.field {
  margin-bottom: 20px;
}

.field-label {
  font-size: 13px;
  color: var(--text-muted);
  margin-bottom: 8px;
  font-style: italic;
  font-family: 'Lora', serif;
}

textarea {
  width: 100%;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-size: 13px;
  font-weight: 300;
  line-height: 1.7;
  resize: none;
  outline: none;
  transition: border-color 0.2s;
  min-height: 80px;
}

textarea:focus { border-color: var(--border-focus); }
textarea::placeholder { color: #c8c0b8; }

/* Date input */
input[type="date"] {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 12px 16px;
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-size: 13px;
  outline: none;
  transition: border-color 0.2s;
  cursor: pointer;
}
input[type="date"]:focus { border-color: var(--border-focus); }

input[type="text"] {
  width: 100%;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  font-weight: 400;
  outline: none;
  transition: border-color 0.2s;
}
input[type="text"]:focus { border-color: var(--border-focus); }
input[type="text"]::placeholder { color: #c8c0b8; }

/* Divider */
.divider {
  height: 1px;
  background: var(--border);
  margin: 48px 0;
  opacity: 0;
  animation: fadeUp 0.5s ease 0.3s forwards;
}

/* Submit button */
.submit-wrap {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 16px 24px;
  background: linear-gradient(to top, var(--bg) 70%, transparent);
  z-index: 100;
}

.submit-inner {
  max-width: 560px;
  margin: 0 auto;
}

.btn-submit {
  width: 100%;
  padding: 16px;
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 12px;
  font-family: 'DM Sans', sans-serif;
  font-size: 13px;
  font-weight: 500;
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.btn-submit:hover { background: #3a7050; transform: translateY(-1px); }
.btn-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
.btn-submit.loading { background: #3a7050; }
.btn-submit.success { background: #2d5a3d; }

/* Toast */
.toast {
  position: fixed;
  top: 24px;
  left: 50%;
  transform: translateX(-50%) translateY(-80px);
  background: var(--text);
  color: white;
  padding: 12px 20px;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 400;
  letter-spacing: 0.04em;
  z-index: 200;
  transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  white-space: nowrap;
}
.toast.show { transform: translateX(-50%) translateY(0); }
.toast.success { background: var(--accent); }
.toast.error { background: var(--danger); }

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>

<div class="toast" id="toast"></div>

<div class="page">
  <div class="header">
    <div class="header-top">
      <div class="title">Revue de semaine</div>
      <div class="week-badge" id="weekBadge">‚Äî</div>
    </div>
    <div class="subtitle">Prends 15 minutes pour toi.</div>
  </div>

  <div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <!-- Bloc 1 : Infos rapides -->
  <div class="section visible" style="animation-delay:0.1s">
    <div class="section-label">Vue d'ensemble</div>

    <div class="field">
      <div class="field-label">Semaine du...</div>
      <input type="date" id="dateInput">
    </div>

    <div class="field">
      <div class="field-label">Note globale</div>
      <div class="score-row" id="scoreRow">
        <button class="score-btn" onclick="selectScore(this,1)">1</button>
        <button class="score-btn" onclick="selectScore(this,2)">2</button>
        <button class="score-btn" onclick="selectScore(this,3)">3</button>
        <button class="score-btn" onclick="selectScore(this,4)">4</button>
        <button class="score-btn" onclick="selectScore(this,5)">5</button>
        <button class="score-btn" onclick="selectScore(this,6)">6</button>
        <button class="score-btn" onclick="selectScore(this,7)">7</button>
        <button class="score-btn" onclick="selectScore(this,8)">8</button>
        <button class="score-btn" onclick="selectScore(this,9)">9</button>
        <button class="score-btn" onclick="selectScore(this,10)">10</button>
      </div>
    </div>

    <div class="field">
      <div class="field-label">√ânergie cette semaine</div>
      <div class="chips">
        <div class="chip" onclick="selectChip(this,'energie','üîã Recharg√©','green')">üîã Recharg√©</div>
        <div class="chip" onclick="selectChip(this,'energie','üòê Neutre','yellow')">üòê Neutre</div>
        <div class="chip" onclick="selectChip(this,'energie','ü™´ √âpuis√©','red')">ü™´ √âpuis√©</div>
      </div>
    </div>

    <div class="field">
      <div class="field-label">√âquilibre pro-perso</div>
      <div class="chips">
        <div class="chip" onclick="selectChip(this,'equilibre','‚úÖ Bien √©quilibr√©','green')">‚úÖ Bien √©quilibr√©</div>
        <div class="chip" onclick="selectChip(this,'equilibre','‚ö†Ô∏è L√©g√®rement d√©bord√©','yellow')">‚ö†Ô∏è L√©g√®rement d√©bord√©</div>
        <div class="chip" onclick="selectChip(this,'equilibre','üö® D√©bord√©','red')">üö® D√©bord√©</div>
      </div>
    </div>

    <div class="field">
      <div class="field-label">Discipline</div>
      <div class="chips">
        <div class="chip" onclick="selectChip(this,'discipline','J\'ai √©t√© full focus','green')">Full focus</div>
        <div class="chip" onclick="selectChip(this,'discipline','Je me suis fait distraire par moment','yellow')">Distrait par moments</div>
        <div class="chip" onclick="selectChip(this,'discipline','J\'ai √©t√© trop distrait dans la semaine','red')">Trop distrait</div>
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- Bloc 2 : R√©flexion -->
  <div class="section visible" style="animation-delay:0.2s">
    <div class="section-label">R√©flexion</div>

    <div class="field">
      <div class="field-label">Principal accomplissement</div>
      <textarea id="accomplissement" placeholder="La chose dont je suis le plus fier cette semaine..." rows="3"></textarea>
    </div>

    <div class="field">
      <div class="field-label">Principal blocage</div>
      <textarea id="blocage" placeholder="Ce qui m'a le plus frein√©..." rows="3"></textarea>
    </div>

    <div class="field">
      <div class="field-label">Intention semaine prochaine</div>
      <textarea id="intention" placeholder="La semaine prochaine, je veux..." rows="3"></textarea>
    </div>
  </div>

  <div style="height: 80px;"></div>
</div>

<!-- Submit -->
<div class="submit-wrap">
  <div class="submit-inner">
    <button class="btn-submit" id="submitBtn" onclick="submitToNotion()">
      <span id="submitIcon">‚Üó</span>
      <span id="submitLabel">Envoyer dans Notion</span>
    </button>
  </div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const state = {
  note: null,
  energie: null,
  equilibre: null,
  discipline: null,
  accomplissement: '',
  blocage: '',
  intention: '',
  date: ''
};

// ‚îÄ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const today = new Date();
const monday = new Date(today);
monday.setDate(today.getDate() - ((today.getDay() + 6) % 7));
const dateStr = monday.toISOString().split('T')[0];
document.getElementById('dateInput').value = dateStr;
state.date = dateStr;

// Week badge
const opts = { day: 'numeric', month: 'long' };
document.getElementById('weekBadge').textContent = 'Sem. du ' + monday.toLocaleDateString('fr-FR', opts);

document.getElementById('dateInput').addEventListener('change', e => {
  state.date = e.target.value;
  updateProgress();
});

// Live capture
['accomplissement','blocage','intention'].forEach(id => {
  document.getElementById(id).addEventListener('input', e => {
    state[id] = e.target.value;
    updateProgress();
  });
});

// ‚îÄ‚îÄ‚îÄ Selectors ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let score = null;

function selectScore(btn, val) {
  document.querySelectorAll('.score-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  score = val;
  state.note = val;
  updateProgress();
}

function selectChip(el, key, val, color) {
  // Deselect siblings
  el.parentElement.querySelectorAll('.chip').forEach(c => {
    c.classList.remove('selected-green','selected-yellow','selected-red');
  });
  el.classList.add('selected-' + color);
  state[key] = val;
  updateProgress();
}

// ‚îÄ‚îÄ‚îÄ Progress ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateProgress() {
  const fields = [state.note, state.energie, state.equilibre, state.discipline, state.accomplissement, state.blocage, state.intention];
  const filled = fields.filter(f => f !== null && f !== '').length;
  const pct = Math.round((filled / fields.length) * 100);
  document.getElementById('progressFill').style.width = pct + '%';
}

// ‚îÄ‚îÄ‚îÄ Submit ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function submitToNotion() {
  const btn = document.getElementById('submitBtn');
  const label = document.getElementById('submitLabel');
  const icon = document.getElementById('submitIcon');

  if (!state.note || !state.energie || !state.equilibre || !state.discipline) {
    showToast('Remplis au moins les 4 champs rapides üëÜ', 'error');
    return;
  }

  btn.disabled = true;
  btn.classList.add('loading');
  icon.textContent = '‚è≥';
  label.textContent = 'Envoi en cours...';

  const semaineName = 'Semaine du ' + new Date(state.date + 'T12:00:00').toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' });

  const payload = {
    parent: { database_id: '31413dd02a1981adaa13c102a31311e9' },
    properties: {
      Semaine: { title: [{ text: { content: semaineName } }] },
      'Note globale': { number: state.note },
      '√ânergie': { select: { name: state.energie } },
      '√âquilibre pro-perso': { select: { name: state.equilibre } },
      'Discipline': { select: { name: state.discipline } },
      'Principal accomplissement': { rich_text: [{ text: { content: state.accomplissement || '' } }] },
      'Principal blocage': { rich_text: [{ text: { content: state.blocage || '' } }] },
      'Intention semaine suivante': { rich_text: [{ text: { content: state.intention || '' } }] },
      'Date': { date: { start: state.date } }
    }
  };

  try {
    const res = await fetch('https://orus.app.n8n.cloud/webhook/weekly-review', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        semaine: semaineName,
        note: state.note,
        energie: state.energie,
        equilibre: state.equilibre,
        discipline: state.discipline,
        accomplissement: state.accomplissement || '',
        blocage: state.blocage || '',
        intention: state.intention || '',
        date: state.date
      })
    });

    if (!res.ok) {
      const err = await res.json();
      throw new Error(err.message || 'Erreur Notion');
    }

    btn.classList.remove('loading');
    btn.classList.add('success');
    icon.textContent = '‚úì';
    label.textContent = 'Envoy√© dans Notion !';
    showToast('Revue sauvegard√©e ‚úì', 'success');

    setTimeout(() => {
      btn.disabled = false;
      btn.classList.remove('success');
      icon.textContent = '‚Üó';
      label.textContent = 'Envoyer dans Notion';
    }, 3000);

  } catch (e) {
    btn.disabled = false;
    btn.classList.remove('loading');
    icon.textContent = '‚Üó';
    label.textContent = 'Envoyer dans Notion';
    showToast('Erreur : ' + e.message, 'error');
  }
}

// ‚îÄ‚îÄ‚îÄ Toast ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showToast(msg, type = '') {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast ' + type;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

// Init progress
updateProgress();
</script>
</body>
</html>
